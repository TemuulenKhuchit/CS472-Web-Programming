<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lab 3</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        margin: 20px;
        background-color: #f4f4f4;
        display: flex;
        justify-content: center;
      }
      .container {
        background-color: white;
        padding: 20px;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        max-width: 800px;
        width: 100%;
        margin: auto;
      }
      h1 {
        text-align: center;
      }
      h2,
      h3 {
        color: #333;
      }
      pre {
        background-color: #f8f8f8;
        padding: 15px;
        border-radius: 5px;
        overflow-x: auto;
      }
      .answer-label {
        font-weight: bold;
        color: #0056b3;
        margin-top: 15px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Lab 3</h1>

      <h2>1. Implement code for the following JavaScript functions, and be sure to use "use strict".</h2>
      <p>
        Note. You may select one of the functions: function expression, arrow function, or regular function. please
        practice each function once.
      </p>

      <p>
        <b>a)</b>
        Write a function named, <code>computeSumOfSquares</code>, that takes as input, an array of numbers and
        calculates and returns the sum of the squares of each number in the input array. E.g.
        computeSumOfSquares([1,2,3]) should be computed as 1<sup>2</sup> + 2<sup>2</sup> + 3<sup>2</sup> = 14. Note:
        Write your JavaScript code without using imperative programming, i.e. Do NOT use any explicit looping construct;
        instead use functional programming style/approach.
      </p>
      <div class="answer-label">Answer:</div>
      <pre>
"use strict";

function computeSumOfSquares(arr) {
    return arr.reduce((sum, num) => sum + Math.pow(num, 2), 0);
}

// Example usage:
console.log(computeSumOfSquares([1, 2, 3])); // Output: 14
        </pre
      >

      <p>
        <b>b)</b>
        Write a function named, <code>printOddNumbersOnly</code>, that takes as input, an array of numbers and finds and
        prints only the numbers which are odd.
      </p>
      <div class="answer-label">Answer:</div>
      <pre>
function printOddNumbersOnly(arr) {
    arr.filter(num => num % 2 !== 0).forEach(num => console.log(num));
}

// Example usage:
printOddNumbersOnly([1, 2, 3, 4, 5, 6]); // Output: 1, 3, 5
        </pre
      >

      <p>
        <b>c)</b>
        Write a function named <code>printFibo</code>, that takes as input, a given length, n, and any two starting
        numbers a and b, and it prints-out the Fibonacci sequence, e.g. 0, 1, 1, 2, 3, 5, 8, 13, 21, 34,...,of the given
        length, beginning with a and b. (e.g. printFibo(n=1, a=0, b=1), prints-out: "0" as output; printFibo(n=2, a=0,
        b=1), prints-out: "0, 1" as output; printFibo(n=3, a=0, b=1), prints-out: "0, 1, 1" as output; printFibo(n=6,
        a=0, b=1), prints-out: "0, 1, 1, 2, 3, 5" as output; and printFibo(n=10, a=0, b=1), prints-out: "0, 1, 1, 2, 3,
        5, 8, 13, 21, 34", as output).
      </p>
      <div class="answer-label">Answer:</div>
      <pre>
function printFibo(n, a, b) {
    let fibo = [a, b];
    while (fibo.length < n) {
        fibo.push(fibo[fibo.length - 1] + fibo[fibo.length - 2]);
    }
    console.log(fibo.slice(0, n).join(', '));
}

// Example usage:
printFibo(6, 0, 1); // Output: "0, 1, 1, 2, 3, 5"
        </pre
      >

      <h2>2. Destructuring assignment:</h2>
      <p>Write the Destructuring assignment that reads:</p>
      <ul>
        <li>name property into the variable name.</li>
        <li>years property into the variable age.</li>
        <li>isAdmin property into the variable isAdmin (false, if no such property)</li>
      </ul>
      <div class="answer-label">Answer:</div>
      <pre>
let user = { name: "John", years: 30 };
let { name, years: age, isAdmin = false } = user;

alert(name); // John
alert(age);  // 30
alert(isAdmin); // false
        </pre
      >

      <h2>3. Array and its methods, and Object literal assignment:</h2>
      <pre>
let libraryBooks = [
    { title: "The Road Ahead", author: "Bill Gates", ID: 1253 },
    { title: "Walter Isaacson", author: "Steve Jobs", ID: 4268 },
    { title: "The Road Ahead", author: "Bill Gates", ID: 4268 },
    { title: "Mockingjay: The Final Book of The Hunger Games", author: "Suzanne Collins", ID: 3257 }
];
        </pre
      >
      <p>Write the following JavaScript functions:</p>

      <h3>a) addBook</h3>
      <p>
        <b>addBook</b>, which will take title, author, and ID as inputs. It will create a new book object and add it to
        the libraryBooks if not exists. addBook should return the newly created book.
      </p>
      <div class="answer-label">Answer:</div>
      <pre>
function addBook(title, author, ID) {
    if (!libraryBooks.some(book => book.ID === ID)) {
        const newBook = { title, author, ID };
        libraryBooks.push(newBook);
        return newBook;
    }
    return null;
}

// Example usage:
console.log(addBook("New Book", "New Author", 1234)); // Adds and returns the new book object
        </pre
      >

      <h3>b) getTitles</h3>
      <p>
        <b>getTitles</b>, which will return all the book titles (string array). The array should be sorted
        alphabetically.
      </p>
      <div class="answer-label">Answer:</div>
      <pre>
function getTitles() {
    return libraryBooks.map(book => book.title).sort();
}

// Example usage:
console.log(getTitles()); // Returns sorted array of book titles
        </pre
      >

      <h3>c) findBooks</h3>
      <p>
        <b>findBooks</b>, which will take the keyword of title as input. It will find books which contain the given
        keyword in the title and return books (object array). The books should be sorted by ID.
      </p>
      <div class="answer-label">Answer:</div>
      <pre>
function findBooks(keyword) {
    return libraryBooks.filter(book => book.title.toLowerCase().includes(keyword.toLowerCase()))
                       .sort((a, b) => a.ID - b.ID);
}

// Example usage:
console.log(findBooks("Road")); // Returns books with "Road" in title, sorted by ID
        </pre
      >

      <h2>4. Implement following functions in data.js and test those in script.js:</h2>
      <pre>
// lab3-data.js
let data = [];

export function get_items() {
    return data;
}
        </pre
      >

      <div class="answer-label">Answer for add_item(new_item):</div>
      <pre>
export function add_item(new_item) {
    // add item (if id does not exist)
    // return true if item is added successfully, false otherwise
    if (!data.some(item => item.id === new_item.id)) {
        data.push(new_item);
        return true;
    }
    return false;
}
        </pre
      >

      <div class="answer-label">Answer for update_item_title_by_id(id, new_title):</div>
      <pre>
export function update_item_title_by_id(id, new_title) {
    // update the title (if id exist)
    // return true if item is updated successfully, false otherwise
    let item = data.find(item => item.id === id);
    if (item) {
        item.title = new_title;
        return true;
    }
    return false;
}
        </pre
      >

      <div class="answer-label">Answer for delete_item_by_id(id):</div>
      <pre>
export function delete_item_by_id(id) {
    // delete the item (if id exist)
    // return true if item is deleted successfully, false otherwise
    const index = data.findIndex(item => item.id === id);
    if (index !== -1) {
        data.splice(index, 1);
        return true;
    }
    return false;
}
        </pre
      >

      <div class="answer-label">Answer for get_item_title_by_id(id):</div>
      <pre>
export function get_item_title_by_id(id) {
    // return the item title by id (if id exist)
    let item = data.find(item => item.id === id);
    return item ? item.title : null;
}
        </pre
      >

      <div class="answer-label">Test code in lab3-script.js:</div>
      <pre>
// lab3-script.js
import {
    get_items, add_item, update_item_title_by_id, delete_item_by_id, get_item_title_by_id
} from "./lab3-data.js";

// Test add_item
console.log(add_item({ id: 1, title: "Item 1" })); // true
console.log(add_item({ id: 1, title: "Item 1" })); // false (duplicate)

// Test get_items
console.log(get_items()); // [{ id: 1, title: 'Item 1' }]

// Test update_item_title_by_id
console.log(update_item_title_by_id(1, "Updated Item 1")); // true
console.log(get_items()); // [{ id: 1, title: 'Updated Item 1' }]

// Test delete_item_by_id
console.log(delete_item_by_id(1)); // true
console.log(delete_item_by_id(2)); // false (not found)
console.log(get_items()); // []

// Test get_item_title_by_id
add_item({ id: 2, title: "Item 2" });
console.log(get_item_title_by_id(2)); // "Item 2"
console.log(get_item_title_by_id(3)); // null (not found)
      </pre>
    </div>
  </body>
</html>
