<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lab 14</title>
    <link rel="stylesheet" href="../css/styles.css" />
  </head>
  <body>
    <div class="container">
      <h1>Lab 14</h1>
      <h2>Topic: TypeScript</h2>
      <h3>Question 1:</h3>
      <p>
        Define a TypeScript function that takes an object with the following properties: name (string), age (number),
        and isStudent (boolean). The function should return a string describing the person.
      </p>
      <div class="answer-label">Code:</div>
      <pre class="code-block">
type Person = {
  name: string;
  age: number;
  isStudent: boolean;
};

function describePerson(person: Person): string {
  const { name, age, isStudent } = person;
  const studentStatus = isStudent ? "a student" : "not a student";
  return `${name} is ${age} years old and is ${studentStatus}.`;
}

const person: Person = { name: "John", age: 25, isStudent: true };
console.log(describePerson(person));
      </pre>

      <h3>Question 2:</h3>
      <p>
        Create two TypeScript modules: one for a Calculator 4 methods add, subtract, multiply, and divide, and another
        for using this Calculator methods to perform a calculation. <br />Note: Ensure your code is well typed and
        formatted.
      </p>
      <div class="answer-label">lab14-calculator.ts code:</div>
      <pre class="code-block">
export class Calculator {
  add(a: number, b: number): number {
    return a + b;
  }

  subtract(a: number, b: number): number {
    return a - b;
  }

  multiply(a: number, b: number): number {
    return a * b;
  }

  divide(a: number, b: number): number {
    if (b === 0) {
      throw new Error("Division by zero is not allowed");
    }
    return a / b;
  }
}        
      </pre>
      <div class="answer-label">lab14.ts code:</div>
      <pre class="code-block">
import { Calculator } from "./lab14-calculator";

const calculator = new Calculator();

const a = 10;
const b = 5;

console.log(`Add: ${calculator.add(a, b)}`);
console.log(`Subtract: ${calculator.subtract(a, b)}`);
console.log(`Multiply: ${calculator.multiply(a, b)}`);
console.log(`Divide: ${calculator.divide(a, b)}`);
      </pre>

      <h3>Question 3:</h3>
      <p>Convert the lab05 Class syntax JavaScript code to TypeScript.</p>
      <div class="answer-label">Code:</div>
      <pre class="code-block">
class Student {
  studentId: number;
  answers: Question[];

  constructor(studentId: number) {
    this.studentId = studentId;
    this.answers = [];
  }

  addAnswer(question: Question): void {
    this.answers.push(question);
  }
}

class Question {
  qid: number;
  answer: string;

  constructor(qid: number, answer: string) {
    this.qid = qid;
    this.answer = answer;
  }

  checkAnswer(answer: string): boolean {
    return this.answer === answer;
  }
}

class Quiz {
  questions: Map&lt;number, string&gt;;
  students: Student[];

  constructor(questions: Question[], students: Student[]) {
    this.questions = new Map();
    questions.forEach((q) => {
      this.questions.set(q.qid, q.answer);
    });
    this.students = students;
  }

  scoreStudentBySid(sid: number): number {
    const student = this.students.find((s) => s.studentId === sid);
    if (!student) {
      return 0;
    }

    let score = 0;
    student.answers.forEach((answer) => {
      if (this.questions.has(answer.qid) && this.questions.get(answer.qid) === answer.answer) {
        score++;
      }
    });

    return score;
  }

  getAverageScore(): number {
    const totalScore = this.students.reduce(
      (sum, student) => sum + this.scoreStudentBySid(student.studentId),
      0
    );
    return totalScore / this.students.length;
  }
}

// Usage Example
const student1 = new Student(10);
student1.addAnswer(new Question(2, "a"));
student1.addAnswer(new Question(3, "b"));
student1.addAnswer(new Question(1, "b"));

const student2 = new Student(11);
student2.addAnswer(new Question(3, "b"));
student2.addAnswer(new Question(2, "a"));
student2.addAnswer(new Question(1, "d"));

const students = [student1, student2];
const questions = [new Question(1, "b"), new Question(2, "a"), new Question(3, "b")];

const quiz = new Quiz(questions, students);
const scoreForStudent10 = quiz.scoreStudentBySid(10);
console.log(scoreForStudent10); // Expected Result: 3

const scoreForStudent11 = quiz.scoreStudentBySid(11);
console.log(scoreForStudent11); // Expected Result: 2

const average = quiz.getAverageScore();
console.log(average); // Expected Result: 2.5        
      </pre>
    </div>
  </body>
</html>
